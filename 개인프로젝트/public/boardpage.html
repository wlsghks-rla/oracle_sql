<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>상세페이지</title>
    <link rel="stylesheet" href="boardpage.css" />
  </head>
  <body>
    <div id="container">
      <form name="write" action="#" method="post">
        <fieldset>
          <legend></legend>
          <ul>
            <li id="title">
              <label for="title">제 목</label>
            </li>
            <li id="author">
              <label for="author">작성자</label>
            </li>
            <li id="date">
              <label for="date">작성일</label>
            </li>
            <li id="categories">
              <label for="categories">분 류</label>
            </li>
            <li id="variety">
              <span>품종</span>
            </li>
            <li id="gender">
              <span>성별</span>
              </select>
            </li>
            <li id="age">
              <span>나이</span>
            </li>
            <li id="content">
              <label for="content" class="content">내용</label>
            </li>
          </ul>
        </fieldset>
      </form>
      <section>
        <button type="submit" onclick="backing()">돌아가기</button>
        <button type="submit" onclick="deleting()">삭제</button>
      </section>
    </div>
  </body>
  <script>
    let boardPart = JSON.parse(localStorage.getItem("boardPart"));
    console.log(boardPart[0][8]);

    // 제목
    function first () {
      let input = document.createElement("input")
      input.value =  boardPart[0][0];
      input.setAttribute("readonly", true);
      document.querySelector("#title").appendChild(input);
      
    }
    first();

    // 작성자
    function second () {
      let input = document.createElement("input")
      input.value =  boardPart[0][1];
      input.setAttribute("readonly", true);
      document.querySelector("#author").appendChild(input);
      
    }
    second();
    
    // 작성일
        function thrid () {
          let ddate = new Date(boardPart[0][2]);
          ddate =
            ddate.getFullYear() +
            "-" +
            (ddate.getMonth() + 1) +
            "-" +
            ddate.getDate();
          boardPart[0][2] = ddate;
      let input = document.createElement("input")
      input.value =  boardPart[0][2];
      input.setAttribute("readonly", true);
      document.querySelector("#date").appendChild(input);
      
    }
    thrid();

    // 분류
    function four () {
      let input = document.createElement("input")
      input.value =  boardPart[0][3];
      input.setAttribute("readonly", true);
      document.querySelector("#categories").appendChild(input);
      
    }
    four();

        // 품종
    function five () {
      let input = document.createElement("input")
      input.value =  boardPart[0][4];
      input.setAttribute("readonly", true);
      document.querySelector("#variety").appendChild(input);
      
    }
    five();

    // 성별
    function six () {
      let input = document.createElement("input")
      input.value =  boardPart[0][5];
      input.setAttribute("readonly", true);
      document.querySelector("#gender").appendChild(input);
      
    }
    six();

     // 나이
    function seven () {
      let input = document.createElement("input")
      input.value =  boardPart[0][6];
      input.setAttribute("readonly", true);
      document.querySelector("#age").appendChild(input);
      
    }
    seven();

     // 내용
    function eight () {
      let textarea = document.createElement("textarea")
      textarea.value =  boardPart[0][7];
      textarea.setAttribute("readonly", true);
      textarea.setAttribute("cols", "85");
textarea.setAttribute("rows", "30");
      document.querySelector("#content").appendChild(textarea);
      
    }
    eight();

    // 삭제
    let indexNum = boardPart[0][8]
    
    async function deleting() {
      console.log(indexNum)
      
      let response = await fetch("/boardDelete", {
          method: "post",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            idx: indexNum,
          }),
        });
        let result = await response.json();
      if(result =[]){
       alert("삭제완료");
       location.href = "freeboards.html";
      }
    }
    
    // 돌아가기
    function backing(){
      console.log(1);
      location.href = "freeboards.html";

    }


  </script>
</html>
